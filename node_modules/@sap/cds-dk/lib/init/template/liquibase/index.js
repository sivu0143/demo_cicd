const mvn = require('../../mvn')
const { readProject } = require('../../projectReader')

module.exports = class LiquibaseTemplate extends require('../../plugin') {

    static help() {
      return 'database migration using Liquibase'
    }

   async canRun() {
      const { isNodejs } = readProject()
      if (isNodejs) throw `'cds add liquibase' is not available for Node.js yet`
      return true
    }

    async run() {
      const { isJava } = readProject()
      if (isJava) await mvn.add('liquibase')
    }
}
