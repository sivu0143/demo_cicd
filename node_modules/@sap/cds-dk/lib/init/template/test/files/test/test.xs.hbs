{{! ESM }}
{{#hasEsmStyle}}
import cds from '@sap/cds'

const { GET, POST, expect, axios } = cds.test (import.meta.dirname+'/..')
{{/hasEsmStyle}}
{{^hasEsmStyle}}
const cds = require('@sap/cds')

const { GET, POST, expect, axios } = cds.test (__dirname+'/..')
{{/hasEsmStyle}}
{{#user}}
axios.defaults.auth = { username: '{{user}}', password: '{{password}}' }
{{/user}}

describe('{{serviceName}} OData APIs', () => {

{{#entities}}{{=<% %>=}}
  it('serves <%name%>', async () => {
    const { data } = await GET `<%&urlPath%> ${{ params: { $select: '<%&selectString%>' } }}`
    expect(data.value).to.containSubset([
      <%&elementsString%>,
    ])
  })
<%={{ }}=%>{{/entities}}

{{#actions}}{{=<% %>=}}
  it('executes <%name%>', async () => {
    const { data } = await POST `<%&urlPath%> ${
      <%&paramsString%>
    }`
    // TODO finish this test
    // expect(data.value).to...
  })
<%={{ }}=%>{{/actions}}
})
