---
approuter:
  image:
    repository: {{appName}}-approuter
{{#hasMultitenancy}}
{{=<% %>=}}
  env:
    TENANT_HOST_PATTERN: ^(.*)-{{ .Release.Name }}-approuter-{{ .Release.Namespace }}.{{ .Values.global.domain }} # change if expose.host is set
<%={{ }}=%>
{{/hasMultitenancy}}
  resources:
    limits:
      ephemeral-storage: 1G
      memory: 500M
    requests:
      ephemeral-storage: 1G
      cpu: 500m
      memory: 500M
  health:
    liveness:
      path: /
    readiness:
      path: /
{{=<% %>=}}
  envFrom:
    - configMapRef:
        name: "{{ .Release.Name }}-approuter-configmap"
<%={{ }}=%>
backendDestinations:
  srv-api:
    service: srv
  {{#hasMultitenancy}}
  mtx-api:
    service: {{#isJava}}srv{{/isJava}}{{^isJava}}sidecar{{/isJava}}
  {{/hasMultitenancy}}
srv:
  networkSecurity:
    allowNamespaceInternal: true
{{#hasMultitenancy}}
sidecar:
  networkSecurity:
    allowNamespaceInternal: true
{{/hasMultitenancy}}
