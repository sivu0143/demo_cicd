---
before-all:
{{#hasUI5}}
  - mkdir -p app/html5-deployer/resources
{{#apps}}
  - npm run build --prefix app/{{app}}
  # zip filename should match the archiveName specified in ui5-deploy.yaml
  - cp -f app/{{app}}/dist/{{app}}.zip app/html5-deployer/resources/{{app}}.zip
{{/apps}}
{{/hasUI5}}
modules:
  - name: {{appName}}-html5-deployer
    build-parameters:
      buildpack:
        {{#hasHelmUnifiedRuntime}}
        builder: proxy-unified-runtime-dmz.int.repositories.cloud.sap/builder/noble
        {{/hasHelmUnifiedRuntime}}
        {{^hasHelmUnifiedRuntime}}
        type: nodejs
        builder: builder-jammy-base
        {{/hasHelmUnifiedRuntime}}
        path: app/html5-deployer
        env:
          BP_NODE_RUN_SCRIPTS: ""
